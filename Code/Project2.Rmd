---
title: "ST 558 Project 2"
author: "John Hinic & Fang Wu"
date: '2022-07-01'
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(include = TRUE, warning = FALSE, message = FALSE)
library(tidyverse)
library(GGally)
library(caret)
#install.packages("devtools")
#library(devtools)
#install_github("AppliedDataSciencePartners/xgboostExplainer")
```

## Introduction 

We are going to analyze an online news popularity data set from [Machine Learning Repository](https://archive.ics.uci.edu/ml/datasets/Online+News+Popularity#). This data set summarizes a heterogeneous set of features about articles published by Mashable in a period of two years. The goal is to predict the number of shares in social networks (popularity). 

We are going to analyze different type of article separately and use following predictors:

* timedelta: Days between the article publication and the data set acquisition 

* num_self_hrefs: Number of links to other articles published by Mashable

* num_imgs: Number of images

* num_videos: Number of videos

* num_keywords: Number of keywords in the metadata

* is_weekend: Was the article published on the weekend?

* LDA_00: Closeness to LDA topic 0

* LDA_01: Closeness to LDA topic 1

* LDA_02: Closeness to LDA topic 2

* LDA_03: Closeness to LDA topic 3

* LDA_04: Closeness to LDA topic 4

* global_rate_positive_words: Rate of positive words in the content

* global_rate_negative_words: Rate of negative words in the content

In order to predict the number of shares, we are going to use 

## Prepare Data

We'll use the `readr` and `dplyr` packags from the `tifyverse`. First, we are going to read in data as tibble using function `read_csv`. Next, in order to access different data channel of interest automatically, we are going to create a variable called `type`. In addition, we create a new variable `LDA` to represent different LDA topic. Last we `filter` the data channel of interest using `params$type` and `select` predictors we are going to work on.  


```{r}
# read in raw data
raw_data <- read_csv("data/OnlineNewsPopularity.csv") 
# create type column for different daa channel
type_data <- raw_data %>% mutate(type=ifelse(data_channel_is_lifestyle==1, "lifestyle", ifelse(data_channel_is_entertainment==1, "entertainment", ifelse(data_channel_is_bus==1, "bus", ifelse(data_channel_is_socmed==1, "socmed", ifelse(data_channel_is_tech==1, "tech", ifelse(data_channel_is_world==1, "world", NA)))))))
# create LDA column for LDA topic
LDA_data <- type_data %>% mutate(LDA=ifelse(LDA_00==1, 0, ifelse(LDA_01==1, 1, ifelse(LDA_02==1, 2, ifelse(LDA_03==1, 3, ifelse(LDA_04==1, 4, NA))))))
# select data for one data channel of interest with predictors for analyzing
target_data <- LDA_data %>% filter(type==params$type) %>% select(timedelta, num_self_hrefs, num_imgs, num_videos,  num_keywords, is_weekend, LDA, global_rate_negative_words, global_rate_positive_words)
target_data
```

##